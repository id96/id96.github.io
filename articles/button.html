<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Interactive DeDeo Visualisations</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<link rel="icon" href="../images/favicon.png">
		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <style>
        .topic { margin: 20px; }
        /* .topic .words { float: right; width: 50%; } */
        .topic .clearing { clear: both; }
        #topics {
            width: 60%;
            display: inline-block;
        }
        .line {
            fill: none;
            stroke: steelblue;
            stroke-width: 2px;
            }
        svg { margin: 20; }
        path.confidence { fill: #eee; }
        path.mean { fill: none; stroke: #999; stroke-width: 5; }
        .axis path, .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
        }
        #words {
            display: inline-block;
            width: 30%
        }
        .words {
            display: inline-block;
            position: relative;
            bottom: 150px;
            left: 20px;
            /* width: 30%; */
        }
        .table-wrapper {
            width:50%;
            /* display: inline-block; */
            font-size: 70%;
        }
       
        /* .select {
            width: 60%; 
            display: inline-block;
        } */
        #wrapper > * > .inner {
            padding: 0;
        }
        table {
            margin: 0 0 4em 0;
        }
        #legend {
            width: 800px;
            text-align: center;
        }
        #legend p {
            display: inline; 
            
            
        }
        </style>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">


							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="../index.html">Home</a></li>
							<li><a href="../about.html">About</a></li>
							<li><a href="../blog.html">Blog</a></li>
							<li><a href="../portfolio.html">Portfolio</a></li>
							<li><a href="../contact.html">Contact</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
                            <h1>Barron & DeDeo Data</h1>
                            <!-- <p>mimno style d3 looping</p> -->
                            <!-- <svg id="estate" height="500" width="800"></svg> -->
                            <!-- <button id="change">Select Topic</button> -->
                            <!-- <select>
                                <option value="volvo">Volvo</option>
                                <option value="saab">Saab</option>
                                <option value="opel">Opel</option>
                                <option value="audi">Audi</option>
                              </select> -->

                              <div class="select">
                                <h2>Estate by Estate Comparisons Per Topic</h2>
                                <form name="myform" onSubmit="return topicClick()">
                                    Select Topic
                                    <!-- <br> -->
                                    <input id="change" type="number" min="0" max="99" value="0">
                                    <!-- <input name="submit"  type="submit" value="submit" > -->
                                </form>
                                <!-- <button id="submit">Submit</button> -->
                                <div id="legend">
                                    <p style="color:red;">Estate 1</p>
                                    <p style="color:green;">Estate 2</p>
                                    <p style="color:blue;">Estate 3</p>
                                </div>

                                <div id="title"></div>
                                <div id="graph"> 
                                    <div id="topics"></div>
                                    <div id="words"></div>
                                </div>
                            </div>
                            

                            <br>
                            <!-- <h3>Default</h3> -->
                              <div class="table-wrapper">
                                
                                <table class="alt">
                                        <h2>DeDeo most common topics</h2>
                                    <thead>
                                        <tr>
                                            <th>Topic Number</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Topic 24</td>
                                            <td>timing and practical management</td>
                                            
                                        </tr>
                                        <tr>
                                            <td>Topic 27</td>
                                            <td>discussion and approval of minutes</td>
                                           
                                        </tr>
                                        <tr>
                                            <td>Topic 34</td>
                                            <td>procedural quarrels over the adoption of articles</td>
                                           
                                        </tr>
                                        <tr>
                                            <td>Topic 38</td>
                                            <td>disagreement over adoption of articles</td>
                                           
                                        </tr>
                                        <tr>
                                            <td>Topic 55</td>
                                            <td>literal depictions of conflict and violence within the chamber</td>
                                        </tr>
                                        <tr>
                                            <td>Topic 59</td>
                                            <td>collaborative adoption of articles</td>
                                        </tr>
                                        <tr>
                                            <td>Topic 77</td>
                                            <td>quarrels about who gets to speak</td>
                                        </tr>
                                        <tr>
                                            <td>Topic 79</td>
                                            <td>goals of the assembly</td>
                                        </tr>
                                        <tr>
                                            <td>Topic 90</td>
                                            <td>technical mangagement of committees</td>
                                        </tr>
                                        <tr>
                                            <td>Topic 94</td>
                                            <td>logical disagreement between members</td>
                                        </tr>
                                    </tbody>
                                </table>

                                
                            </div>

                            <div class="table-wrapper">
                                    <table class="alt">
                                            <h2>DeDeo topics associated with longer speeches</h2>
                                        <thead>
                                            <tr>
                                                <th>Topic Number</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Topic 61</td>
                                                <td>expressions of patriotism</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 40</td>
                                                <td>exhortation to deliberate</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 98</td>
                                                <td>inventing and managing procedure</td> 
                                            </tr>
                                            <tr>
                                                <td>Topic 94</td>
                                                <td>logical disagreement between members</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 10</td>
                                                <td>expressions of honor (or opprobrium) for great men</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 21</td>
                                                <td>threats to the nation from appointed officials and military</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 79</td>
                                                <td>goals of the assembly</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 32</td>
                                                <td>presentation of decrees by committees</td>
                                            </tr>
                                            <tr>
                                                <td>Topic 12</td>
                                                <td>legality and the law</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>


                                <div class="table-wrapper">
                                        <table class="alt">
                                                <h2>DeDeo topics associated with debate over powers to declare war</h2>
                                            <thead>
                                                <tr>
                                                    <th>Topic Number</th>
                                                    <th>Description</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Topic 17</td>
                                                    <td>powers and abilities of the state to conduct war</td>
                                                </tr>
                                                <tr>
                                                    <td>Topic 91</td>
                                                    <td>power of the King</td>
                                                </tr>
                                                <tr>
                                                    <td>Topic 62</td>
                                                    <td>military unrest</td> 
                                                </tr>
                                                <tr>
                                                    <td>Topic 92</td>
                                                    <td>defensive presentation of particular facts</td>
                                                </tr>
                                                <tr>
                                                    <td>Topic 30</td>
                                                    <td>timing and ordering of events</td>
                                                </tr>
                                                <tr>
                                                    <td>Topic 53</td>
                                                    <td>presentation and discussion of decrees</td>
                                                </tr>
                                                <tr>
                                                    <td>Topic 74</td>
                                                    <td>the reading of letters</td>
                                                </tr>
                                                <tr>
                                                    <td>Topic 4</td>
                                                    <td>concern over traitors and other internal threats to the nation</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                    <div class="table-wrapper">
                                            <table class="alt">
                                                    <h2>DeDeo topics associated with top speakers</h2>
                                                <thead>
                                                    <tr>
                                                        <th>Topic Number</th>
                                                        <th>Description</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Topic 22</td>
                                                        <td>structure of articles</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 0</td>
                                                        <td>divisive responses from left and right</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 83</td>
                                                        <td>discussion on the declaration of the rights of man</td> 
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 13</td>
                                                        <td>nationalization of church property</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 86</td>
                                                        <td>editing of decrees</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 54</td>
                                                        <td>organization of the military</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 80</td>
                                                        <td>legislation on the relationship between King and assembly</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 97</td>
                                                        <td>court of cassation</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 77</td>
                                                        <td>requests for adjournment and pauses in discussion</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 84</td>
                                                        <td>pensions</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 69</td>
                                                        <td>treasury</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Topic 29</td>
                                                        <td>finance and loans</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                            
                        </div>
                    </div>
            <!-- Footer -->
            <footer class="footer">
                    <div class="inner">
                        <section>
                                <h2 style="margin-right: 30px;
                                display: inline-block;">Follow</h2>
                                <ul class="icons">
                                    <li><a href="https://www.linkedin.com/in/isabelle-debrabanter/" class="icon style2 fa-linkedin"><span class="label">Twitter</span></a></li>
                                    <li><a href="https://github.com/id96" class="icon style2 fa-github"><span class="label">GitHub</span></a></li>
                                    <li><a href="mailto:id96@cornell.edu" class="icon style2 fa-envelope-o"><span class="label">Email</span></a></li>
                                </ul>
                            </section>
                            <ul class="copyright">
                                <li>&copy; Isabelle De Brabanter. All rights reserved</li>
                            </ul>
                    </div>
                </footer>

        </div>

		<!-- Scripts -->
            <script src="../assets/js/jquery.min.js"></script>
            <script src="../assets/js/browser.min.js"></script>
            <script src="../assets/js/breakpoints.min.js"></script>
            <script src="../assets/js/util.js"></script>
            <script src="../assets/js/main.js"></script>
            <script>
                
                
            const async = async () => {
                const data = await d3.json("../data/date_sep.json");
                const words = await d3.json("../data/barron_words.json");

                console.log(data)
                console.log(words)
                // console.log(words[0])
                
                    var maxProb = 0.1;

                    var height = 300;
	                var width = 800;

                    const monthScale = d3.scaleTime()
                        .domain([new Date(1789, 6), new Date(1791, 8)])
	                    .range([0, 700]);
	
                    var topicsDiv = d3.select("#topics");
                    var yScale = d3.scaleLinear()
                            .domain([0, maxProb])
                            .range([250, 0]);
		                var yAxis = d3.axisLeft(yScale)
                        var xAxis = d3.axisBottom(monthScale)
                            .tickFormat(d3.timeFormat("%b %Y"))
                            .ticks(10)
                        
                        var svg = topicsDiv.append("svg")
                            .attr("height", height)
                            .attr("width", width)
                            .append("g").attr("transform", "translate(60,10)");
                        
                        let plot = svg.append("g")
                            .attr("transform", "translate(20,0)");
                        
                        svg.append("g")
                            .attr("class", "y axis")
                            .attr("transform", "translate(20,0)")
                            .call(yAxis);

                        svg.append("g")
                            .attr("class", "x axis")
                            .attr("transform", "translate(20,250)")
                            .call(xAxis);

                        svg.append("text")
                            .attr("transform", "translate(360,290)")
                            .text("Date");
                        svg.append("text")
                            .attr("transform", "rotate(-90)")
                            .attr("y", -20)
                            .attr("x", -(175))
                            // .attr("dy", "1em")
                            .text("Probability");

                    var wordsDiv = d3.select("#words");

                    
                     
                        d3.select("#change").on("input", function() {
                           
                            console.log(+this.value)
                            svg.selectAll(".line").remove();
                            wordsDiv.selectAll(".words").remove();
                            titleDiv.selectAll(".title").remove();
                            draw(+this.value)
                        });
                        var titleDiv = d3.select("#title");
                        
                        function draw(value) {
                          
                                console.log(value)

                                d3.values(data).forEach(function(d,i) {

                                if (value == i){
                                    console.log("winner", value, i)
                                    titleDiv.append("div")
                                        .attr("class", "title")
                                        .attr("id", "t" + i)
                                        .text("Topic "+i);
                                    wordsDiv.append("div")
                                        .attr("class", "words")
                                        .text(words[i])

                                var estate1 = d3.values(d)[0];
                              
                                var estate2 = d3.values(d)[1];
                                var estate3 = d3.values(d)[2];
                                var months = d3.keys(estate1);

                                let parseDate = d3.timeParse("%Y-%m");
                                let formatTime = d3.timeFormat("%Y-%m");

                                monthScale_dict = {}

                                months.forEach( (function(d,i){
                                    month = monthScale(parseDate(d));
                                    monthScale_dict[i] = month;
                                }));


                                var line = d3.line()
                                    .y(function (d) { return d[1]})
                                    .x(function (d, i) { return d[0]; });

                                estate1_points = []
                                d3.values(estate1).forEach( (function(d,i){
                                    var scaled_x = monthScale_dict[i];
                                    var scaled_y = yScale(d["prob"]);
                                    estate1_points.push([scaled_x, scaled_y]);
                                }));
                                estate2_points = []
                                d3.values(estate2).forEach( (function(d,i){
                                    var scaled_x = monthScale_dict[i];
                                    var scaled_y = yScale(d["prob"]);
                                    estate2_points.push([scaled_x, scaled_y]);
                                }));
                                estate3_points = []
                                d3.values(estate3).forEach( (function(d,i){
                                    var scaled_x = monthScale_dict[i];
                                    var scaled_y = yScale(d["prob"]);
                                    estate3_points.push([scaled_x, scaled_y]);
                                }));

                                
                                let estate1_line = plot.append("path")
                                        .attr("class", "line")
                                        .attr("d", line(estate1_points))
                                        .style("stroke", "red");
                                let estate2_line = plot.append("path")
                                        .attr("class", "line")
                                        .attr("d", line(estate2_points))
                                        .style("stroke", "green");
                                let estate3_line = plot.append("path")
                                        .attr("class", "line")
                                        .attr("d", line(estate3_points))
                                        .style("stroke", "blue");
                                }
                                else {
                                    console.log("loser")
                                    
                                }
                            
                    
                                })

                    };
               
            };
        async();
            </script>
	</body>
</html>